<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>qr generator</title>
	<style>
		h1, h3 {
			display: flex;
			justify-content: center;
			align-items: center;
		color: green;
		}
		center {
		display: grid;
		justify-content: center;
		align-items: center;
		}
	</style>
</head>
<body>
	<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<!-- jquery -->
<!-- create qr code script here.... -->
	<script src="../source/create-qr-script.js"></script>
	<center>
<h1>whats app qr code generator</h1>
MOBILE NO.<input type="number" oninput="invalid()" name="phno" id="phno" placeholder="enter mobile no" ><br><br>
MESSAGE(OPTIONAL)<textarea id="message" placeholder="Type message here...(optional)" cols="5" rows="4"></textarea><br>
<br>
	<input type="button" id="generatebtn" 
				value="Generate QR Code"  />
		<br>
		<br><br><br>
		<fieldset id="qr-code" style="display: none;"></fieldset>
<hr>
<button onclick="history.back()">Back</button>
</center>

<script>
	let phno=document.getElementById("phno");
	let message=document.getElementById("message");
	let qrGenerationForm=document.getElementById("generatebtn");

	let qrCode;
	function generateQrCode(qrContent) {
	return new QRCode("qr-code", {
		text: qrContent,
		width: 200,
		height: 200,
		colorDark: "#000000",
		colorLight: "#ffffff",
		
	});
	}
	$('#generatebtn').attr('disabled','disabled');
	function invalid(){
      if (phno.value.length === 10) {
			$('#generatebtn').removeAttr('disabled');
		}
      else{
			document.getElementById('qr-code').style.display="none";
			$('#generatebtn').attr('disabled','disabled');
    }};

	
	// Event listener for form submit event
	qrGenerationForm.addEventListener("click", function (event) {
		document.getElementById('qr-code').style.display="block";
	 let mess=message.value;
		let crtmess=mess.replaceAll(' ','%20');

     let qrContentInput=`https://wa.me/+91${phno.value}?text=${crtmess}`;
	

	let qrContent = qrContentInput;
	console.log(qrContent)
	if (qrCode == null) {
// 		let a=document.getElementById('qr-code').innerHTML=`<a href='in.jpeg' downlaod>link here</a>`;
// console.log(a);

		// Generate code initially
		qrCode = generateQrCode(qrContent);
	} else {
		
		// If code already generated then make
		// again using same object
		
		qrCode.makeCode(qrContent);
	}
	});</script>
</body>
</html>